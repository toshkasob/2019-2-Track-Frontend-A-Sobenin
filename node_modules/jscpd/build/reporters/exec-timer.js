"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var safe_1 = require("colors/safe");
var events_1 = require("../events");
var t = require('exectimer');
var ExecTimerReporter = /** @class */ (function () {
    function ExecTimerReporter() {
    }
    ExecTimerReporter.prototype.attach = function (eventEmitter) {
        eventEmitter.on(events_1.END_EVENT, this.generateReport.bind(this));
    };
    ExecTimerReporter.prototype.report = function () {
        console.log("Exec timer executed.");
    };
    ExecTimerReporter.prototype.generateReport = function () {
        var total = 0;
        Object.keys(t.timers).forEach(function (name) {
            var results = t.timers[name];
            total += results.duration();
            console.log(safe_1.bgMagenta(name));
            console.log(safe_1.red("Exec count: " + results.count() + ", total time: " + safe_1.bold(parse(results.duration())) + ", tick time: " + safe_1.bold(parse(results.min())) + " (" + parse(results.min()) + " - " + parse(results.median()) + " - " + parse(results.max()) + ")"));
        });
        console.log(safe_1.green("Total time: " + parse(total)));
    };
    return ExecTimerReporter;
}());
exports.ExecTimerReporter = ExecTimerReporter;
function parse(num) {
    if (num < 1e3) {
        return num + ' ns';
    }
    else if (num >= 1e3 && num < 1e6) {
        return num / 1e3 + ' us';
    }
    else if (num >= 1e6 && num < 1e9) {
        return num / 1e6 + ' ms';
    }
    else if (num >= 1e9) {
        return num / 1e9 + ' s';
    }
    return num.toString();
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZXhlYy10aW1lci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9yZXBvcnRlcnMvZXhlYy10aW1lci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLG9DQUEwRDtBQUUxRCxvQ0FBeUQ7QUFFekQsSUFBTSxDQUFDLEdBQUcsT0FBTyxDQUFDLFdBQVcsQ0FBQyxDQUFDO0FBRS9CO0lBQUE7SUF5QkEsQ0FBQztJQXhCUSxrQ0FBTSxHQUFiLFVBQWMsWUFBK0I7UUFDM0MsWUFBWSxDQUFDLEVBQUUsQ0FBQyxrQkFBUyxFQUFFLElBQUksQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7SUFDN0QsQ0FBQztJQUVNLGtDQUFNLEdBQWI7UUFDRSxPQUFPLENBQUMsR0FBRyxDQUFDLHNCQUFzQixDQUFDLENBQUM7SUFDdEMsQ0FBQztJQUVPLDBDQUFjLEdBQXRCO1FBQ0UsSUFBSSxLQUFLLEdBQVcsQ0FBQyxDQUFDO1FBQ3RCLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLE9BQU8sQ0FBQyxVQUFBLElBQUk7WUFDaEMsSUFBTSxPQUFPLEdBQVEsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUNwQyxLQUFLLElBQUksT0FBTyxDQUFDLFFBQVEsRUFBRSxDQUFDO1lBQzVCLE9BQU8sQ0FBQyxHQUFHLENBQUMsZ0JBQVMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO1lBQzdCLE9BQU8sQ0FBQyxHQUFHLENBQ1QsVUFBRyxDQUNELGlCQUFlLE9BQU8sQ0FBQyxLQUFLLEVBQUUsc0JBQWlCLFdBQUksQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLFFBQVEsRUFBRSxDQUFDLENBQUMscUJBQWdCLFdBQUksQ0FDaEcsS0FBSyxDQUFDLE9BQU8sQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUNyQixVQUFLLEtBQUssQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFLENBQUMsV0FBTSxLQUFLLENBQUMsT0FBTyxDQUFDLE1BQU0sRUFBRSxDQUFDLFdBQU0sS0FBSyxDQUFDLE9BQU8sQ0FBQyxHQUFHLEVBQUUsQ0FBQyxNQUFHLENBQ3JGLENBQ0YsQ0FBQztRQUNKLENBQUMsQ0FBQyxDQUFDO1FBQ0gsT0FBTyxDQUFDLEdBQUcsQ0FBQyxZQUFLLENBQUMsaUJBQWUsS0FBSyxDQUFDLEtBQUssQ0FBRyxDQUFDLENBQUMsQ0FBQztJQUNwRCxDQUFDO0lBQ0gsd0JBQUM7QUFBRCxDQUFDLEFBekJELElBeUJDO0FBekJZLDhDQUFpQjtBQTJCOUIsU0FBUyxLQUFLLENBQUMsR0FBVztJQUN4QixJQUFJLEdBQUcsR0FBRyxHQUFHLEVBQUU7UUFDYixPQUFPLEdBQUcsR0FBRyxLQUFLLENBQUM7S0FDcEI7U0FBTSxJQUFJLEdBQUcsSUFBSSxHQUFHLElBQUksR0FBRyxHQUFHLEdBQUcsRUFBRTtRQUNsQyxPQUFPLEdBQUcsR0FBRyxHQUFHLEdBQUcsS0FBSyxDQUFDO0tBQzFCO1NBQU0sSUFBSSxHQUFHLElBQUksR0FBRyxJQUFJLEdBQUcsR0FBRyxHQUFHLEVBQUU7UUFDbEMsT0FBTyxHQUFHLEdBQUcsR0FBRyxHQUFHLEtBQUssQ0FBQztLQUMxQjtTQUFNLElBQUksR0FBRyxJQUFJLEdBQUcsRUFBRTtRQUNyQixPQUFPLEdBQUcsR0FBRyxHQUFHLEdBQUcsSUFBSSxDQUFDO0tBQ3pCO0lBQ0QsT0FBTyxHQUFHLENBQUMsUUFBUSxFQUFFLENBQUM7QUFDeEIsQ0FBQyJ9